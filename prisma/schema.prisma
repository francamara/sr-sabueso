generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id           Int                  @id @default(autoincrement())
  name         String
  description  String?
  weight       Float
  listPrice    Float
  retailPrice  Float
  stock        Int
  barcode      String?
  age          String?
  size         String?
  createdAt    DateTime             @default(now())
  updatedAt    DateTime             @updatedAt
  animalId     Int
  lineId       Int
  brandId      Int
  factoryId    Int
  uniqueCode   String @unique // Nuevo campo con código de 8 dígitos
  animal       Animal               @relation(fields: [animalId], references: [id])
  brand        Brand                @relation(fields: [brandId], references: [id])
  factory      Factory              @relation(fields: [factoryId], references: [id])
  line         Line                 @relation(fields: [lineId], references: [id])
  distributors ProductDistributor[]
}

model Animal {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  products Product[]
}

model Line {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  products Product[]
}

model Brand {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  products Product[]
}

model Distributor {
  id       Int                  @id @default(autoincrement())
  name     String               @unique
  products ProductDistributor[]
}

model Factory {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  products Product[]
}

model ProductDistributor {
  id            Int         @id @default(autoincrement())
  productId     Int
  distributorId Int
  stock         Int
  price         Float
  distributor   Distributor @relation(fields: [distributorId], references: [id])
  product       Product     @relation(fields: [productId], references: [id])
}
